# 4. Spring Security와 JWT
정리자 : 김이주

## JWT

 - JSON Web Token 
 - 웹 애플리케이션에서 사용자 인증 및 권한 부여를 위한 보안 토큰을 생성하고 전송하기 위한 표준 방식
 - 정보를 JSON 형식으로 인코딩하며, 이 정보는 디지털 서명이나 암호화를 사용하여 안전하게 전달


 ### 구성

 - Header (헤더): JWT의 종류와 어떤 알고리즘을 사용하여 서명 또는 암호화된 것인지를 나타냄

- Payload (페이로드): JWT에 포함되는 정보를 담고 있는 JSON 객체

- Signature (서명): 서명 부분은 Header와 Payload의 내용을 기반으로 생성되며, 토큰의 무결성을 검증하기 위해 사용. 서명은 비밀 키 또는 공개 키를 사용하여 생성되며, 이를 통해 토큰이 위조되지 않았음을 확인


## Spring boot와 사용

1. 사용자 로그인과 JWT 생성:

- 사용자가 인증(로그인)을 시도하면 Spring Security는 사용자 정보를 검증하고, 인증이 성공하면 JWT를 생성
- JWT에는 사용자 정보, 권한 정보 및 기타 클레임 정보가 포함
- JWT는 서버에서 서명되어 클라이언트에게 반환

2. JWT의 저장 및 전송:

- 클라이언트는 JWT를 안전한 방법으로 저장(일반적으로 웹 애플리케이션의 클라이언트 쿠키 또는 로컬 스토리지)
- 클라이언트가 요청을 보낼 때마다 JWT를 HTTP 헤더 (예: "Authorization" 헤더) 또는 요청 파라미터와 함께 전송

3. 요청 인증:

- 클라이언트가 요청을 보낼 때 JWT가 함께 전송되면, Spring Security는 JWT의 유효성을 검사
- 검증에는 JWT의 서명을 확인하고 만료 기간을 확인하는 등의 단계가 포함

4. 권한 부여:

- JWT가 유효하고 검증되면 Spring Security는 JWT에서 추출한 사용자 정보와 권한 정보를 기반으로 권한 부여를 수행
- 사용자는 해당 요청에 대한 액세스 권한을 가지고 있는지 확인

5. 보호된 리소스 액세스:

- 인증 및 권한 부여가 완료된 사용자는 보호된 리소스에 액세스 가능
- Spring Security는 사용자가 접근 권한을 가진 리소스에만 액세스할 수 있도록 보호

## 장점
- 세션 상태를 유지하지 않고도 분산된 아키텍처에서 사용자 인증을 처리할 수 있다.
- JWT는 클라이언트와 서버 간의 무상태(stateless) 통신을 지원하므로 확장성이 높다.
- 다양한 클라이언트 (웹 앱, 모바일 앱, 다른 마이크로서비스)에서 동일한 JWT를 사용하여 사용자 인증을 유지할 수 있다.

